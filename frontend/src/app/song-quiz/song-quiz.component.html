<app-head> </app-head>
<div class="m-3">
  <div>
    <h1 class="display-3">
      <span class="font-weight-bold singer-text">{{ title }} </span><small class="text-muted">{{ singer }}</small>
    </h1>
  </div>
  <div *ngIf="quizzes.length != 0; else load">
    <mat-horizontal-stepper linear #stepper>
      <mat-step *ngFor="let quiz of quizzes; index as num">
        <ng-template matStepLabel>Problem {{ num + 1 }}</ng-template>
        <h1>
          <span class="display-4 font-weight-bold">Q{{ num + 1 }}.</span>
          <span *ngFor="let morph of quiz.morphs; index as i">
            <span *ngIf="quiz.count_list.includes(i)">&nbsp;</span>
            <span *ngIf="i != quiz.morph_index; else blank">{{ morph }}</span>
            <ng-template #blank>_____</ng-template>
          </span>
        </h1>
        <h2 class="text-secondary">{{ quiz.translation }}</h2>
        <div>
          <div class="mt-3 btn-group-toggle" *ngFor="let word of examples[num]; index as j">
            <label class="btn btn-outline-secondary" [ngClass]="{
                active: word == answer[num]
              }">
              <input type="radio" (click)="select(num, word)" />
              {{ j + 1 }}
            </label>
            <span class="display-6">&nbsp; {{ word }}</span>
          </div>
        </div>
        <div class="d-flex justify-content-center">
          <button class="btn-light" *ngIf="num != 0" mat-icon-button matStepperPrevious>
            <mat-icon>navigate_before</mat-icon>
          </button>

          <button mat-icon-button class="btn-light" matStepperNext>
            <mat-icon>navigate_next</mat-icon>
          </button>
        </div>
      </mat-step>
      <mat-step *ngFor="let quiz of arrayQuizzes; index as num">
        <div *ngIf="!!song">
          <ng-template matStepLabel>Problem {{ num + quizzes.length + 1 }}</ng-template>
          <h1>
            <span class="display-4 font-weight-bold">Q{{ num + quizzes.length + 1 }}.</span>
            <span>List the words in the correct order</span>
          </h1>
          <div class="question content">
            <div class="lyrics" cdkDropList cdkDropListOrientation="horizontal" (cdkDropListDropped)="drop($event,num)">
              <p *ngFor="let morph of quiz; index as i">
                <span class="kor" *ngIf="morph != ''" cdkDrag>{{ morph }}</span>
              </p>
            </div>
            <p id="trans">{{ questionTrans[num] }}</p>

            <button class="btn btn-primary" (click)="checkAnswer(num)">
              SUBMIT
            </button>
          </div>
        </div>
        <div class="d-flex justify-content-center">
          <button class="btn-light" mat-icon-button matStepperPrevious>
            <mat-icon>navigate_before</mat-icon>
          </button>
          <button mat-icon-button class="btn-light" *ngIf="num!=arrayQuizzes.length-1" matStepperNext>
            <mat-icon>navigate_next</mat-icon>
          </button>
        </div>
      </mat-step>
    </mat-horizontal-stepper>
  </div>
  <ng-template #load>
    <h1>Loading...</h1>
  </ng-template>
</div>